Let us explain how to confirm if a given semi-algebraic set $V \left( E \right) \setminus V \left( N \right)$ defined by the ideals $E$ and $N$ is a smooth manifold by using the constant rank theorem by taking semi-algebraic sets appearing in the classificaiton of divergent diagram as examples. In the classification, we got the following list of semi-algebraic sets: 

| # | Semi-Algebraic Set |
| - |------------------- |
| 1 | $c_1 = c_2 = c_3 = c_4 = 0$ |
| 2 | $c_1 c_4 - c_2 c_3 \neq 0$ |
| 3 | $c_1 c_4 - c_2 c_3 = 0$ and ($c_2 c_4 \neq 0$ or $c_1 c_4 \neq 0$ or $c_1 c_3 \neq 0$)  |
| 4 | $c_2 c_4 = c_1 c_4 = c_2 c_3 = c_1 c_3 = 0$ and ($c_1 \neq 0$ or $c_2 \neq 0$ or $c_3 \neq 0$ or $c_4 \neq 0$)  |

Let $E$ and $N$ be ideal defining a semi-algebraic set. For example, the fourth semi-algebraic set can be written as $V \left( E \right) \setminus V \left( N \right)$ where 

$$E = \langle c_2 c_4, c_1 c_4, c_2 c_3, c_1 c_3 \rangle$$

and 

$$N = \langle c_1, c_2, c_3, c_4 \rangle$$

where $\langle \cdots \rangle$ is the ideal generated by $\cdots$ in $\mathbb{R} \left[ c_1, c_2, c_3, c_4 \right]$. In the source code ([check_smoothness.exe](check_smoothness.exe)), you can check the semi-algebraic sets in the list are smooth manifolds by using the constant rank theorem. 

Let $\mathbb{R} \left[ c \right]$ be a polynomial ring with variables $c = \left( c_1, \ldots, c_m \right)$ with the coefficient field $\mathbb{R}$ and $E$, $N$ be ideals in $\mathbb{R} \left[ c \right]$. Let $h_1, \ldots, h_l$ be generators of $E$. Let $dE$ be the $l \times m$ jacobi matrix defined as:

$$ dE = 
\begin{pmatrix}
\frac{\partial h_1}{\partial c_1} & \cdots & \frac{\partial h_1}{\partial c_m} \\
\vdots & \ddots & \vdots \\
\frac{\partial h_l}{\partial c_1} & \cdots & \frac{\partial h_l}{\partial c_m}
\end{pmatrix}.
$$

In the following line in the source code, 
```Singular
list L = gauss_elimination_gb(E,N,dE);
```
Gaussian elimination is done in the parameter range $V \left( E \right) \setminus V \left( N \right)$.

> ```Singular
> gauss_elimination_gb(ideal E, ideal N, matrix A);
> ```
> | Parameter | Description |
> | --------- | ----------- |
> | `E`, `N` | ideals specifying the parameter range |
> | `A` | matrix possibly containing parameters to be Gaussian eliminated |
> #### Output
> - decomposition of the parameter range along with the row echelon form on each decomposition
> - The output format is as follows:
> ```Singular
> [i]: information of row echelon form on the $i$-th parameter range $V(E_i)\V(N_i)$.
>  [i][1]: generators of $E_i$
>  [i][2]: generators of $N_i$
>  [i][3]: row echelon form of the matrix `A`
>  [i][4]: list of indices of independent row vectors
> ```

Specifically, `size(L[i][4])` is the size of list of indices of independent row vectors that is the rank of the matrix `dE` in the parameter range $V \left( E_i \right) \setminus V \left( N_i \right)$.

The remainder of the code, 
```Singular

```
computes the rank of the matrix `dE` in each parameter ranges and combine and simplify parameter ranges on which the matrix `dE` has the same rank. The result is saved in the list `Lrank`.
